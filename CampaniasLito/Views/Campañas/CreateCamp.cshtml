@model CampaniasLito.Models.NuevaCampañaView

@{
    ViewBag.Title = "Crear Campaña";
    Layout = null;
}

<meta http-equiv="Expires" content="0" />
<meta http-equiv="Pragma" content="no-cache" />

<script type="text/javascript">
    {
        if (history.forward(1))
            location.replace(history.forward(1))
    }

    function nobackbutton() {
        window.location.hash = "Litoprocess";
        window.location.hash = "Again-No-back-button" //chrome
        window.onhashchange = function () { window.location.hash = "Litoprocess"; }
    }

</script>

@if (Session["Compañia"] != null)
{
    <title>@Session["Compañia"].ToString() - @ViewBag.Title</title>

    if (Session["Compañia"].ToString() == "KFC")
    {
        <link href="~/Content/css/Compañias/KFC.css" rel="stylesheet" />
    }
    else if (Session["Compañia"].ToString() == "STARBUCKS")
    {
        <link href="~/Content/css/Compañias/Starbucks.css" rel="stylesheet" />
    }
    else if (Session["Compañia"].ToString() == "KRISPY KREME")
    {
        <link href="~/Content/css/Compañias/KrispyKreme.css" rel="stylesheet" />
    }
}
else
{
    <title>Campañas LITO - @ViewBag.Title</title>
}

@Styles.Render("~/bundles/jquery")
@Styles.Render("~/bundles/bootstrap")
@Scripts.Render("~/bundles/modernizr")
@Styles.Render("~/bundles/js")
@Styles.Render("~/bundles/css")


<link href="~/Content/css/menuresponsive.css" rel="stylesheet" />
<link href="~/Content/icon/style.css" rel="stylesheet" />
<link href="~/Content/css/Estilos.css" rel="stylesheet" />
<link href="~/Content/css/rotating-card.css" rel="stylesheet" />
<link href="~/Content/css/flexboxgrid.min.css" rel="stylesheet" />
<link href="~/Content/themes/base/tooltip.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css?family=Actor" rel="stylesheet">
<link href="~/Content/sweetalert.css" rel="stylesheet" />
<link href="~/fonts/flaticon.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.css">
<link href="~/Content/css/jquery.datetimepicker.css" rel="stylesheet" />
<link href="~/Content/css/Vistas.css" rel="stylesheet" />
<link href="~/Content/css/Generales.css" rel="stylesheet" />

<script src="https://kit.fontawesome.com/8068fd2104.js" crossorigin="anonymous"></script>

<script type="text/javascript">

    var timer = setInterval("prueba()", 3000);
    function prueba() {
        //document.write("actualizado, y se vuelve a ");
    }

    /**/</script>

@using (Html.BeginForm("Create", "Campañas", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div class="panel" style="margin: 1% 2%">
        <div class="panel-heading table-responsive" id="panelH">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <table style="width:100%" id="dataTable" cellspacing="0">
                <tr>
                    <td class=" col-sm-12">
                        <h2 style="color: white"><i class="fas fa-calendar-alt"></i> @ViewBag.Title</h2>
                    </td>
                    <td class="col-sm-12">
                        <div id="botones" class="input-group" style="display:flex; float:right">
                            <a href="@Url.Action("Index", "Campañas")">
                                <i class="fas fa-times-circle btn btn-pilares" style="border-radius:10px; text-align: right; font-size: 17px"></i>
                            </a>
                        </div>
                    </td>
                    <td class="col-sm-12" align="right">
                        <div class="input-group">
                            <button type="submit" class="botonF1Modal btn-success" style="background-color: green">
                                <i class="fas fa-check-circle"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            </table>
        </div>

        @Html.AntiForgeryToken()

        <div class="panel-body" style="padding-top: 10px; margin-bottom: -35px">
            <div class="form-horizontal row responsivoUsuarioLabel">
                <div class="col-sm-4">
                    <div class="form-group">
                        <div class="col-sm-12">
                            @Html.EditorFor(model => model.Nombre, new { htmlAttributes = new { @class = "form-control responsivoUsuarioText inputModal", disabled = "disabled", @required = "true", @oninvalid = "setCustomValidity('Este campo es obligatorio')", @oninput = "setCustomValidity('')", @style = "text-transform:uppercase", placeholder = "Nombre" } })
                        </div>
                    </div>
                </div>
                <div class="col-sm-8">
                    <div class="form-group">
                        <div class="col-sm-12">
                            @Html.EditorFor(model => model.Descripcion, new { htmlAttributes = new { @class = "form-control responsivoUsuarioText inputModal", disabled = "disabled", @required = "true", @oninvalid = "setCustomValidity('Este campo es obligatorio')", @oninput = "setCustomValidity('')", @style = "text-transform:uppercase", placeholder = "Descripción" } })
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="panel panel-primary">
        <div class="panel-body" style="margin: 0 2%">
            @if (Model.Detalles.Count == 0)
            {
                <div id="unId35" class="table-responsive">
                    <table class="table table-striped table-bordered table-hover" style="width:100%" id="dataTable" cellspacing="0">
                        <thead>
                            <tr>
                                <td style="width: 90%">
                                    <h2 class="responsivoUsuarioLabelFa"><i class="fa fa-shopping-cart responsivoUsuarioLabelFa"></i> Aún no se han agregado tiendas</h2>
                                </td>
                            </tr>
                        </thead>
                    </table>
                </div>
            }
            else
            {
                <div class="table-responsive" style="margin-top: -28px">
                    <table class="table table-striped table-bordered table-hover" style="width:100%" id="dataTable" cellspacing="0">
                        <thead>
                            <tr>
                                <th style="width:5%; text-align:center">
                                    SEL.
                                </th>
                                <th style="width: 55%">
                                    @Html.DisplayNameFor(model => model.Detalles[0].Tienda.Restaurante)
                                </th>
                                <th style="width: 20%">
                                    @Html.DisplayNameFor(model => model.Detalles[0].Tienda.Region.Nombre)
                                </th>
                                <th style="width: 20%">
                                    @Html.DisplayNameFor(model => model.Detalles[0].Tienda.Ciudad.Nombre)
                                </th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div id="unId70" class="table-responsive">
                    <table class="table table-striped table-bordered table-hover" style="width:100%" id="dataTable" cellspacing="0">
                        <tbody>
                            @foreach (var item in Model.Detalles)
                            {
                                <tr style="font-size:10px">
                                    <td width="5%" align="center">
                                        @Html.CheckBoxFor(modelItem => item.Seleccionada, htmlAttributes: new { @class = "checkTamanio" })
                                    </td>
                                    <td style="width: 55%">
                                        @Html.DisplayFor(modelItem => item.Tienda.Restaurante)
                                    </td>
                                    <td style="width: 20%" align="center">
                                        @Html.DisplayFor(modelItem => item.Tienda.Region.Nombre)
                                    </td>
                                    <td style="width: 20%" align="center">
                                        @Html.DisplayFor(modelItem => item.Tienda.Ciudad.Nombre)
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                @*<div class="table-responsive" style="margin-bottom: -30px">
                        <table class="table table-striped table-bordered table-hover" style="width:100%" id="dataTable" cellspacing="0">
                            <thead>
                                <tr style="font-size:14px; background-color: #4E5D6C; color: #fff">
                                    <td colspan="2" align="center" style="width: 70%">
                                        <strong>TOTAL</strong>
                                    </td>
                                    <td align="center" style="width: 10%">
                                        <strong>
                                            @Html.DisplayFor(modelItem => Model.TotalQuantity)
                                        </strong>
                                    </td>
                                    <td align="center" style="width: 15%">
                                        <strong>
                                            @Html.DisplayFor(modelItem => Model.TotalValue)
                                        </strong>
                                    </td>
                                    <td style=" width: 5%"></td>
                                </tr>
                            </thead>
                        </table>
                    </div>*@
            }
        </div>
    </div>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script src="~/Scripts/jquery.datetimepicker.full.js"></script>
    <script src="~/Content/js/sweetalert.js" type="text/javascript"></script>
    <script src="~/Scripts/sweetalert.min.js" type="text/javascript"></script>

    @*<script>
            $.datetimepicker.setLocale('es');
            $("#FechaCompra").datetimepicker({
                mask: false,
            });
        </script>*@

    <script>
        window.onload = function () {
            var contenedor = document.getElementById('contenedor_carga');
            contenedor.style.visibility = 'hidden';
            contenedor.style.opacity = '0';
        }
    </script>

    @if (TempData["msgDetalles"] != null)
    {
        <script type="text/javascript">

            swal({
                title: "<span style='color:#fff'>@ViewBag.Title</span>",
                text: '<span style="color:#fff">@TempData["msgDetalles"].ToString()</span>',
                html: true,
                type: "info",
                showConfirmButton: false,
                animation: true,
                customClass: 'animated swing',
                background: '#B3C9D8',
                grow: 'fullscreen',
                timer: 2000,
            });
        </script>
    }

    @if (TempData["msgCampaña"] != null)
    {
        <script type="text/javascript">

            swal({
                title: "<span style='color:#fff'>@ViewBag.Title</span>",
                text: '<span style="color:#fff">@TempData["msgCampaña"].ToString()</span>',
                html: true,
                type: "info",
                showConfirmButton: false,
                animation: true,
                customClass: 'animated swing',
                background: '#B3C9D8',
                grow: 'fullscreen',
                timer: 2000,
            });
        </script>
    }
}